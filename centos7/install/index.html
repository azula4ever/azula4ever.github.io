


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Presentation and Documentation of server">
      
      
        <link rel="canonical" href="https://azula4ever.github.io/centos7/install/">
      
      
        <meta name="author" content="Azula 4ever">
      
      <link rel="shortcut icon" href="../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.0.2">
    
    
      
        <title>Install / Initial Config - Server Info</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.07c9fbf5.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#01-download-centos-7" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://azula4ever.github.io" title="Server Info" class="md-header-nav__button md-logo" aria-label="Server Info">
      
  <img src="../../images/ghostview.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" /></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Server Info
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Install / Initial Config
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://azula4ever.github.io" title="Server Info" class="md-nav__button md-logo" aria-label="Server Info">
      
  <img src="../../images/ghostview.png" alt="logo">

    </a>
    Server Info
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Cent OS 8
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Cent OS 8" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Cent OS 8
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../centos8/install/" title="Install / Initial Config" class="md-nav__link">
      Install / Initial Config
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../centos8/ntp_ssh-server/" title="NTP / SSH Server" class="md-nav__link">
      NTP / SSH Server
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Cent OS 7
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Cent OS 7" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Cent OS 7
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Install / Initial Config
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z" /></svg>
        </span>
      </label>
    
    <a href="./" title="Install / Initial Config" class="md-nav__link md-nav__link--active">
      Install / Initial Config
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#01-download-centos-7" class="md-nav__link">
    (01) Download CentOS 7
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#02-install-centos-7" class="md-nav__link">
    (02) Install CentOS 7
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03-initial-settings-add-an-user" class="md-nav__link">
    (03) Initial Settings : Add an User
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#04-firewall-and-selinux" class="md-nav__link">
    (04) FireWall and SELinux
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#05-networking" class="md-nav__link">
    (05) Networking
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#06-services" class="md-nav__link">
    (06) Services
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#07-update-system" class="md-nav__link">
    (07) Update System
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#08-add-repositories-for-yum" class="md-nav__link">
    (08) Add Repositories for yum
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#09-configure-vim" class="md-nav__link">
    (09) Configure vim
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-configure-sudo" class="md-nav__link">
    (10) Configure sudo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-crons-setting" class="md-nav__link">
    (11) Cron's Setting
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ntp_ssh-server/" title="NTP / SSH Server" class="md-nav__link">
      NTP / SSH Server
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#01-download-centos-7" class="md-nav__link">
    (01) Download CentOS 7
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#02-install-centos-7" class="md-nav__link">
    (02) Install CentOS 7
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#03-initial-settings-add-an-user" class="md-nav__link">
    (03) Initial Settings : Add an User
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#04-firewall-and-selinux" class="md-nav__link">
    (04) FireWall and SELinux
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#05-networking" class="md-nav__link">
    (05) Networking
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#06-services" class="md-nav__link">
    (06) Services
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#07-update-system" class="md-nav__link">
    (07) Update System
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#08-add-repositories-for-yum" class="md-nav__link">
    (08) Add Repositories for yum
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#09-configure-vim" class="md-nav__link">
    (09) Configure vim
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-configure-sudo" class="md-nav__link">
    (10) Configure sudo
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-crons-setting" class="md-nav__link">
    (11) Cron's Setting
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                  <h1>Install / Initial Config</h1>
                
                <h2 id="01-download-centos-7">(01) Download CentOS 7</h2>
<p><strong><em>Download</em></strong></p>
<p>[1]. This is the configuration Examples for CentOS 7.x that is compatible with Red Hat Enterprise Linux 7.x. CentOS 7 was released on 7 July 2014 and will be supported untill the end of June, 2024.</p>
<p>Download the CentOS 7.7 ISO file for installation from the following site.</p>
<p><a href="http://isoredirect.centos.org/centos/7.7.1908/isos/x86_64/" target="_blank">http://isoredirect.centos.org/centos/7.7.1908/isos/x86_64/</a></p>
<p><strong><em>Create an Installation disk for CentOS 7</em></strong></p>
<p>After downloading ISO of CentOS 7.x, Burn it to a DVD with an burning application to create an installation disk. If you create it with the function of Windows 7/8/10, refer to follows.</p>
<p>[2]. Insert an empty DVD first. Next, click right button of the mouse and select "Burn disk image".</p>
<p><img alt="" src="../../images/CentOS_7/download/img/1.png" /></p>
<p>[3]. Click "Burn" button and start burning.</p>
<p><img alt="" src="../../images/CentOS_7/download/img/2.png" /></p>
<p>[4]. After finishing burning, eject the disk and proceed to the installation.</p>
<p><img alt="" src="../../images/CentOS_7/download/img/3.png" /></p>
<hr />
<h2 id="02-install-centos-7">(02) Install CentOS 7</h2>
<p>[1]. Insert CentOS install disk and start the Computer. Then, Following screen is displayed, Push Enter key to proceed.</p>
<p><img alt="" src="../../images/CentOS_7/install/img/1.png" /></p>
<p>[2]. Select the language you'd like to use during the installation.</p>
<p><img alt="" src="../../images/CentOS_7/install/img/2.png" /></p>
<p>[3]. This is the default screen for some basic configuration. First, set timezone, click the <code>[DATE&amp;TIME]</code> icon.</p>
<p><img alt="" src="../../images/CentOS_7/install/img/3.png" /></p>
<p>[4]. Click a point on the map you'd like to set your timezone and push <code>[Done]</code> button which is on the upper left.</p>
<p><img alt="" src="../../images/CentOS_7/install/img/4.png" /></p>
<p>[5]. Back to the default screen. Next, click the <code>[KEYBOARD]</code> icon.</p>
<p><img alt="" src="../../images/CentOS_7/install/img/5.png" /></p>
<p>[6]. click <code>[+]</code> button on under-left to add another keyboard type for your language.</p>
<p><img alt="" src="../../images/CentOS_7/install/img/6.png" /></p>
<p>[7]. Select your keyboard type and click <code>[Add]</code> button.</p>
<p><img alt="" src="../../images/CentOS_7/install/img/7.png" /></p>
<p>[8]. After adding keyboard layout, send up your keyboard on the top for 1st priority like follows and click <code>[Done]</code> button which is upper left to finish.</p>
<p><img alt="" src="../../images/CentOS_7/install/img/8.png" /></p>
<p>[9]. Back to the default screen. For <code>[SOFTWARE SELECTION]</code>, it's OK to keep default because it had better to install with [<code>Minimal Install]</code> for initial installation. Next, click the <code>[INSTALLATION DESTINATION]</code> icon.</p>
<p><img alt="" src="../../images/CentOS_7/install/img/9.png" /></p>
<p>[10]. Select installation disk. Click the disk icon you'd like to install and next, click <code>[Done]</code> button on upper left to proceed. If you'd like to customize partition layouts, check a box <code>[I will configure partitioning]</code> and proceed.</p>
<p><img alt="" src="../../images/CentOS_7/install/img/10.png" /></p>
<p>[11]. Back to the default screen. click the <code>[NETWORK &amp; HOSTNAME]</code>icon.</p>
<p><img alt="" src="../../images/CentOS_7/install/img/11.png" /></p>
<p>[12]. Input any hostname you like in <code>[Hostname]</code> field and click [ON] button on upper-right to enable networking.</p>
<p><img alt="" src="../../images/CentOS_7/install/img/12.png" /></p>
<p>[13]. Click <code>[Done]</code> button which is upper left to finish.</p>
<p><img alt="" src="../../images/CentOS_7/install/img/13.png" /></p>
<p>[14]. If it's OK all, click <code>[Begin Installation]</code> and proceed to next.</p>
<p><img alt="" src="../../images/CentOS_7/install/img/14.png" /></p>
<p>[15]. Installation starts and required to set root password and to create a common user. Click the each icon and move to configuration.</p>
<p><img alt="" src="../../images/CentOS_7/install/img/15.png" /></p>
<p>[16]. On the root password settings, input any password you like and click <code>[Done]</code> button to finish as follows.</p>
<p><img alt="" src="../../images/CentOS_7/install/img/16.png" /></p>
<p>[17]. On the common user settings, input any user name and password you like and click <code>[Done]</code> button to finish as follows.</p>
<p><img alt="" src="../../images/CentOS_7/install/img/17.png" /></p>
<p>[18]. After finishing installation, click <code>[Reboot]</code> button.</p>
<p><img alt="" src="../../images/CentOS_7/install/img/18.png" /></p>
<p>[19]. After rebooting, login prompt is shown like follows. login with root user and password you set during installation. Installing CentOS completes if you can login normally.</p>
<pre><code class="bash">CentOS Linux 7 (Core)
Kernel 3.10.0-862.el7.x86_64 on an x86_64

localhost login:
</code></pre>

<hr />
<h2 id="03-initial-settings-add-an-user">(03) Initial Settings : Add an User</h2>
<p>[1]. Add an User <code>"cent"</code> as an example below.</p>
<pre><code class="bash">[root@dlp ~]# useradd cent
[root@dlp ~]# passwd cent
Changing password for user cent.
New UNIX password:     # set password
Retype new UNIX password:     # confirm
passwd: all authentication tokens updated successfully.
[root@dlp ~]# exit     # logout
</code></pre>

<p>[2]. Try to switch to a user that was added above.</p>
<pre><code class="bash">dlp login: cent     # input user name
password:     # password
[cent@dlp ~]$ su -     # switch to root
Password:     # root password
[root@dlp ~]#     # just switched to root
</code></pre>

<p>[3]. Make a user be only a user who can switch to root as an administration user. (it's 'cent' in this example)</p>
<pre><code class="bash">[root@dlp ~]# usermod -G wheel cent
[root@dlp ~]# vi /etc/pam.d/su
#%PAM-1.0
auth            sufficient      pam_rootok.so
# Uncomment the following line to implicitly trust users in the &quot;wheel&quot; group.
#auth           sufficient      pam_wheel.so trust use_uid
# Uncomment the following line to require a user to be in the &quot;wheel&quot; group.
# uncomment the following line
auth            required        pam_wheel.so use_uid
auth            substack        system-auth
auth            include         postlogin
account         sufficient      pam_succeed_if.so uid = 0 use_uid quiet
account         include         system-auth
password        include         system-auth
session         include         system-auth
session         include         postlogin
session         optional        pam_xauth.so
</code></pre>

<p>[4]. To forward to emails for root user to another user, set like follows. (it's 'cent' in this example)</p>
<pre><code class="bash">[root@dlp ~]# vi /etc/aliases
# Person who should get root's mail
# last line: uncomment and change to a user
root: cent
[root@dlp ~]# newaliases     # reload
</code></pre>

<hr />
<h2 id="04-firewall-and-selinux">(04) FireWall and SELinux</h2>
<p><em>Initial Settings : FireWall</em></p>
<p>[1]. It's possible to show Service Status of FireWall like follows. (enabled by default)</p>
<pre><code class="bash">[root@dlp ~]# systemctl status firewalld
● firewalld.service - firewalld - dynamic firewall daemon
   Loaded: loaded (/usr/lib/systemd/system/firewalld.service; disabled; vendor preset: enabled)
   Active: active (running) since Thu 2015-03-31 19:36:27 JST; 2s ago
 Main PID: 1308 (firewalld)
   CGroup: /system.slice/firewalld.service
           └─1308 /usr/bin/python -Es /usr/sbin/firewalld --nofork --nopid
.....
.....
</code></pre>

<p>[2]. If you use FireWall service, it needs to modify settings of it because incoming requests for services are mostly not allowed by default. <a href="">Refer to here to basic operation and settings to configure firewalld service</a>.</p>
<p>[3]. If FireWall service does not need for you because of some reasons like that some FireWall Machines are running in your Local Netowrk or others, it's possbile to stop and disable it like follows.</p>
<pre><code class="bash"># stop service
[root@dlp ~]# systemctl stop firewalld
# disable service
[root@dlp ~]# systemctl disable firewalld
rm '/etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service'
rm '/etc/systemd/system/basic.target.wants/firewalld.service'
</code></pre>

<p><em>Initial Settings : SELinux</em></p>
<p>[4]. It's possible to show Status of SELinux (Security-Enhanced Linux) like follows. (enabled by default)</p>
<pre><code class="bash">[root@dlp ~]# getenforce
Enforcing     # SELinux is enabled
</code></pre>

<p>[5].If you enable SELinux, <a href="">Refer to here for basic operations and configurations of SELinux</a>.</p>
<p>[6]. If SELinux function does not need for you because of some reasons like that your server is running only in Local safety Network or others, it's possbile to disable it like follows.</p>
<pre><code class="bash">[root@dlp ~]# vi /etc/selinux/config
# This file controls the state of SELinux on the system.
# SELINUX= can take one of these three values:
#     enforcing - SELinux security policy is enforced.
#     permissive - SELinux prints warnings instead of enforcing.
#     disabled - No SELinux policy is loaded.
SELINUX=disabled   # change to disabled
# SELINUXTYPE= can take one of these two values:
#     targeted - Targeted processes are protected,
#     minimum - Modification of targeted policy. Only selected processes are protected.
#     mls - Multi Level Security protection.
SELINUXTYPE=targeted

# restart to apply new setting
[root@dlp ~]# reboot
</code></pre>

<hr />
<h2 id="05-networking">(05) Networking</h2>
<p><em>Initial Settings : Network Settings</em></p>
<p>[1]. Set static IP address to the server.
Replace the interface name <code>"eth0"</code> for your own environment's one.</p>
<pre><code class="bash"># set hostname
[root@localhost ~]# hostnamectl set-hostname dlp.srv.world
# display devices
[root@localhost ~]# nmcli d
DEVICE       TYPE      STATE      CONNECTION
eth0         ethernet  connected  eth0
lo           loopback  unmanaged  --

# set IPv4 address ⇒ nmcli *** [IP address]
[root@localhost ~]# nmcli c modify eth0 ipv4.addresses 10.0.0.30/24
# set default gateway
[root@localhost ~]# nmcli c modify eth0 ipv4.gateway 10.0.0.1
# set DNS
[root@localhost ~]# nmcli c modify eth0 ipv4.dns 10.0.0.1
# set manual for static setting (it's &quot;auto&quot; for DHCP)
[root@localhost ~]# nmcli c modify eth0 ipv4.method manual
# restart the interface and reload the settings
[root@localhost ~]# nmcli c down eth0; nmcli c up eth0
Connection successfully activated (D-Bus active path: /org/freedesktop/NetworkManager/ActiveConnection/1)
# show settings
[root@localhost ~]# nmcli d show eth0
GENERAL.DEVICE:                 eth0
GENERAL.TYPE:                   ethernet
GENERAL.HWADDR:                 00:0C:29:CD:9C:2D
GENERAL.MTU:                    1500
GENERAL.STATE:                  100 (connected)
GENERAL.CONNECTION:             eth0
GENERAL.CON-PATH:               /org/freedesktop/NetworkManager/ActiveConnection/0
WIRED-PROPERTIES.CARRIER:       on
IP4.ADDRESS[1]:                 ip = 10.0.0.30/24, gw = 10.0.0.1
IP4.DNS[1]:                     10.0.0.1
IP6.ADDRESS[1]:                 ip = fe80::20c:29ff:fecd:9c2d/64, gw = ::

# show status
[root@localhost ~]# ip addr show
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000
    link/ether 00:0c:29:cd:9c:2d brd ff:ff:ff:ff:ff:ff
    inet 10.0.0.30/24 brd 10.0.0.255 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::20c:29ff:fecd:9c2d/64 scope link
       valid_lft forever preferred_lft forever
</code></pre>

<p>[2]. Disable IPv6 if you do not need it.</p>
<pre><code class="bash">[root@localhost ~]# vi /etc/default/grub
# line 6: add
GRUB_CMDLINE_LINUX=&quot;ipv6.disable=1 rd.lvm.lv=fedora-server/root.....
# apply changing
[root@localhost ~]# grub2-mkconfig -o /boot/grub2/grub.cfg
[root@localhost ~]# reboot
</code></pre>

<p>[3]. The example of interface name above is <code>"eth0"</code> but if your system is installed on phisical machine, the name is not <code>"ethX"</code> by default. Then If you'd like to use the network interface name <code>"ethX"</code>, configure like follows.</p>
<pre><code class="bash">[root@dlp ~]# vi /etc/default/grub
# line 6: add
GRUB_CMDLINE_LINUX=&quot;net.ifnames=0 rd.lvm.lv=fedora/swap rd.md=0.....
# apply changing
[root@dlp ~]# grub2-mkconfig -o /boot/grub2/grub.cfg
[root@dlp ~]# reboot
</code></pre>

<hr />
<h2 id="06-services">(06) Services</h2>
<p><em>Initial Settings : Services</em></p>
<p>[1]. It's possible to make sure services' status like follows.</p>
<pre><code class="bash"># display the list of services which are running
[root@dlp ~]# systemctl -t service
UNIT                                    LOAD   ACTIVE SUB     DESCRIPTION
auditd.service                          loaded active running Security Auditing Service
avahi-daemon.service                    loaded active running Avahi mDNS/DNS-SD Stack
crond.service                           loaded active running Command Scheduler
dbus.service                            loaded active running D-Bus System Message Bus
getty@tty1.service                      loaded active running Getty on tty1
...
...
...
systemd-udevd.service                   loaded active running udev Kernel Device Manager
systemd-update-utmp.service             loaded active exited  Update UTMP about System Reboot/Shutdown
systemd-user-sessions.service           loaded active exited  Permit User Sessions
systemd-vconsole-setup.service          loaded active exited  Setup Virtual Console
tuned.service                           loaded active running Dynamic System Tuning Daemon

LOAD   = Reflects whether the unit definition was properly loaded.
ACTIVE = The high-level unit activation state, i.e. generalization of SUB.
SUB    = The low-level unit activation state, values depend on unit type.

39 loaded units listed. Pass --all to see loaded but inactive units, too.
To show all installed unit files use 'systemctl list-unit-files'.

# the list of all services
[root@dlp ~]# systemctl list-unit-files -t service
UNIT FILE                               STATE
auditd.service                          enabled
autovt@.service                         disabled
avahi-daemon.service                    enabled
blk-availability.service                disabled
brandbot.service                        static
...
...
...
systemd-user-sessions.service           static
systemd-vconsole-setup.service          static
teamd@.service                          static
tuned.service                           enabled
wpa_supplicant.service                  disabled

125 unit files listed.
</code></pre>

<p>[2]. Stop and turn OFF auto-start setting for a service if you don'd need it. (it's smartd as an example below)</p>
<pre><code class="bash">[root@dlp ~]# systemctl stop postfix
[root@dlp ~]# systemctl disable postfix
rm '/etc/systemd/system/multi-user.target.wants/postfix.service'
</code></pre>

<p>[3]. There are some SysV services yet. Those are controled by chkconfig like follows.</p>
<pre><code class="bash">[root@dlp ~]# chkconfig --list

Note: This output shows SysV services only and does not include native
      systemd services. SysV configuration data might be overridden by native
      systemd configuration.

      If you want to list systemd services use 'systemctl list-unit-files'.
      To see services enabled on particular target use
      'systemctl list-dependencies [target]'.

iprdump         0:off   1:off   2:on    3:on    4:on    5:on    6:off
iprinit         0:off   1:off   2:on    3:on    4:on    5:on    6:off
iprupdate       0:off   1:off   2:on    3:on    4:on    5:on    6:off
netconsole      0:off   1:off   2:off   3:off   4:off   5:off   6:off
network         0:off   1:off   2:on    3:on    4:on    5:on    6:off

# for exmaple, turn OFF auto-start setting for netconsole
[root@dlp ~]# chkconfig netconsole off
</code></pre>

<hr />
<h2 id="07-update-system">(07) Update System</h2>
<p>[1] After installing CentOS, Update the system first if possible.</p>
<pre><code class="bash">[root@dlp ~]# yum -y update
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: ftp.iij.ad.jp
 * extras: ftp.iij.ad.jp
 * updates: ftp.iij.ad.jp
Resolving Dependencies
--&gt; Running transaction check
---&gt; Package NetworkManager.x86_64 1:0.9.9.1-13.git20140326.4dba720.el7 will be updated
---&gt; Package NetworkManager.x86_64 1:0.9.9.1-23.git20140326.4dba720.el7_0 will be an update
...
...
...
--&gt; Finished Dependency Resolution

Dependencies Resolved

= == == == == == == == == == == == == == == == == == == == == == == == == == == == == == == == == == == ==
 Package                      Arch      Version                       Repository     Size
= == == == == == == == == == == == == == == == == == == == == == == == == == == == == == == == == == == ==
Installing:
 kernel                       x86_64    3.10.0-123.4.2.el7            updates        29 M
Updating:
 NetworkManager               x86_64    1:0.9.9.1-23.git20140326...   updates       1.4 M
 NetworkManager-glib          x86_64    1:0.9.9.1-23.git20140326...   updates       369 k
 NetworkManager-tui           x86_64    1:0.9.9.1-23.git20140326...   updates       190 k
 gnutls                       x86_64    3.1.18-9.el7_0                updates       609 k
 json-c                       x86_64    0.11-4.el7_0                  updates        31 k
 kernel-tools                 x86_64    3.10.0-123.4.2.el7            updates       669 k
 kernel-tools-libs            x86_64    3.10.0-123.4.2.el7            updates       609 k
 kexec-tools                  x86_64    2.0.4-32.el7.centos.1         updates       320 k
 libtasn1                     x86_64    3.3-5.el7_0                   updates       316 k
 mariadb-libs                 x86_64    1:5.5.37-1.el7_0              updates       752 k
 microcode_ctl                x86_64    2:2.1-7.1.el7_0.1             updates       488 k
 openssl                      x86_64    1:1.0.1e-34.el7_0.3           updates       705 k
 openssl-libs                 x86_64    1:1.0.1e-34.el7_0.3           updates       939 k
 selinux-policy               noarch    3.12.1-153.el7_0.10           updates       340 k
 selinux-policy-targeted      noarch    3.12.1-153.el7_0.10           updates       3.8 M
 tuned                        noarch    2.3.0-11.el7_0.3              updates       145 k
 tzdata                       noarch    2014e-1.el7_0                 updates       433 k

Transaction Summary
= == == == == == == == == == == == == == == == == == == == == == == == == == == == == == == == == == == ==
Install   1 Package
Upgrade  17 Packages

Total download size: 41 M
...
...
...
  Verifying  : kernel-tools-libs-3.10.0-123.el7.x86_64                                                34/35
  Verifying  : 1:NetworkManager-tui-0.9.9.1-13.git20140326.4dba720.el7.x86_64                         35/35

Installed:
  kernel.x86_64 0:3.10.0-123.4.2.el7

Updated:
  NetworkManager.x86_64 1:0.9.9.1-23.git20140326.4dba720.el7_0         NetworkManager-glib.x86_64 1:0.9.9.1-2
  NetworkManager-tui.x86_64 1:0.9.9.1-23.git20140326.4dba720.el7_0     gnutls.x86_64 0:3.1.18-9.el7_0
  json-c.x86_64 0:0.11-4.el7_0                                         kernel-tools.x86_64 0:3.10.0-123.4.2.e
  kernel-tools-libs.x86_64 0:3.10.0-123.4.2.el7                        kexec-tools.x86_64 0:2.0.4-32.el7.cent
  libtasn1.x86_64 0:3.3-5.el7_0                                        mariadb-libs.x86_64 1:5.5.37-1.el7_0
  microcode_ctl.x86_64 2:2.1-7.1.el7_0.1                               openssl.x86_64 1:1.0.1e-34.el7_0.3
  openssl-libs.x86_64 1:1.0.1e-34.el7_0.3                              selinux-policy.noarch 0:3.12.1-153.el7
  selinux-policy-targeted.noarch 0:3.12.1-153.el7_0.10                 tuned.noarch 0:2.3.0-11.el7_0.3
  tzdata.noarch 0:2014e-1.el7_0

Complete!
</code></pre>

<hr />
<h2 id="08-add-repositories-for-yum">(08) Add Repositories for yum</h2>
<p><em>Initial Settings : Add Repositories</em></p>
<p>Add some useful external repositories to install useful softwares.</p>
<p>[1] Install a plugin to add priorities to each installed repositories.</p>
<pre><code class="bash">[root@dlp ~]# yum -y install yum-plugin-priorities
# set [priority=1] to official repository
[root@dlp ~]# sed -i -e &quot;s/\]$/\]\npriority=1/g&quot; /etc/yum.repos.d/CentOS-Base.repo
</code></pre>

<p>[2] Add EPEL Repository which is provided from Fedora project.</p>
<pre><code class="bash">[root@dlp ~]# yum -y install epel-release
# set [priority=5]
[root@dlp ~]# sed -i -e &quot;s/\]$/\]\npriority=5/g&quot; /etc/yum.repos.d/epel.repo
# for another way, change to [enabled=0] and use it only when needed
[root@dlp ~]# sed -i -e &quot;s/enabled=1/enabled=0/g&quot; /etc/yum.repos.d/epel.repo
# if [enabled=0], input a command to use the repository
[root@dlp ~]# yum --enablerepo=epel install [Package]
</code></pre>

<p>[3] Add CentOS SCLo Software collections Repository.</p>
<pre><code class="bash">[root@dlp ~]# yum -y install centos-release-scl-rh centos-release-scl
# set [priority=10]
[root@dlp ~]# sed -i -e &quot;s/\]$/\]\npriority=10/g&quot; /etc/yum.repos.d/CentOS-SCLo-scl.repo
[root@dlp ~]# sed -i -e &quot;s/\]$/\]\npriority=10/g&quot; /etc/yum.repos.d/CentOS-SCLo-scl-rh.repo
# for another way, change to [enabled=0] and use it only when needed
[root@dlp ~]# sed -i -e &quot;s/enabled=1/enabled=0/g&quot; /etc/yum.repos.d/CentOS-SCLo-scl.repo
[root@dlp ~]# sed -i -e &quot;s/enabled=1/enabled=0/g&quot; /etc/yum.repos.d/CentOS-SCLo-scl-rh.repo
# if [enabled=0], input a command to use the repository
[root@dlp ~]# yum --enablerepo=centos-sclo-rh install [Package]
[root@dlp ~]# yum --enablerepo=centos-sclo-sclo install [Package]
</code></pre>

<p>[4] Add Remi's RPM Repository which provides many useful packages.</p>
<pre><code class="bash">[root@dlp ~]# yum -y install http://rpms.famillecollet.com/enterprise/remi-release-7.rpm
# set [priority=10]
[root@dlp ~]# sed -i -e &quot;s/\]$/\]\npriority=10/g&quot; /etc/yum.repos.d/remi-safe.repo
# for another way, change to [enabled=0] and use it only when needed
[root@dlp ~]# sed -i -e &quot;s/enabled=1/enabled=0/g&quot; /etc/yum.repos.d/remi-safe.repo
# if [enabled=0], input a command to use the repository
[root@dlp ~]# yum --enablerepo=remi-safe install [Package]
</code></pre>

<hr />
<h2 id="09-configure-vim">(09) Configure vim</h2>
<p><em>Initial Settings : Configure vim</em></p>
<p>Install and Configure vim that is more convenience than vi.</p>
<p>[1] Install vim</p>
<pre><code class="bash">[root@dlp ~]# yum -y install vim-enhanced
</code></pre>

<p>[2] Set command alias. ( Apply to all users below. If you apply to a user, Write the same settings in '~/.bashrc' )</p>
<pre><code class="bash">[root@dlp ~]# vi /etc/profile
# add at the last line
alias vi='vim'
[root@dlp ~]# source /etc/profile     # reload
</code></pre>

<p>[3] Configure vim. ( Apply to a user below. If you applly to all users, Write the same settings in '/etc/vimrc', some settings are applied by default though. )</p>
<pre><code class="bash">[root@dlp ~]# vi ~/.vimrc
&quot; use extended function of vim (no compatible with vi)
set nocompatible
&quot; specify encoding
set encoding=euc-jp
&quot; specify file encoding
set fileencodings=iso-2022-jp,sjis
&quot; specify file formats
set fileformats=unix,dos
&quot; take backup
&quot; if not, specify [ set nobackup ]
set backup
&quot; specify backup directory
set backupdir=~/backup
&quot; take 50 search histories
set history=50
&quot; ignore Case
set ignorecase
&quot; distinct Capital if you mix it in search words
set smartcase
&quot; highlights matched words
&quot; if not, specify [ set nohlsearch ]
set hlsearch
&quot; use incremental search
&quot; if not, specify [ set noincsearch ]
set incsearch
&quot; show line number
&quot; if not, specify [ set nonumber ]
set number
&quot; Visualize break ( $ ) or tab ( ^I )
set list
&quot; highlights parentheses
set showmatch
&quot; not insert LF at the end of file
set binary noeol
&quot; enable auto-indent
&quot; if not, specify [ noautoindent ]
set autoindent
&quot; show color display
&quot; if not, specify [ syntax off ]
syntax on
&quot; change colors for comments if it's set [ syntax on ]
highlight Comment ctermfg=LightCyan
&quot; wrap lines
&quot; if not, specify [ set nowrap ]
set wrap
</code></pre>

<hr />
<h2 id="10-configure-sudo">(10) Configure sudo</h2>
<p><em>Initial Settings : Configure sudo</em></p>
<p>Configure sudo to separate users' duty if some people share privileges.</p>
<p>It's unnecessarry to install sudo manually because it is installed by default even if "Minimal Install".</p>
<p>[1] Transfer root privilege to a user all.</p>
<pre><code class="bash">[root@dlp ~]# visudo
# add at the last line: user 'cent' can use all root privilege
cent    ALL=(ALL)       ALL
# how to write ⇒ destination host=(owner) command
# make sure with the user 'cent'
[cent@dlp ~]$ /usr/bin/cat /etc/shadow
cat: /etc/shadow: Permission denied     # denied normally
[cent@dlp ~]$ sudo /usr/bin/cat /etc/shadow
[sudo] password for cent:     # own password
daemon:*:16231:0:99999:7:::
adm:*:16231:0:99999:7:::
lp:*:16231:0:99999:7:::
...
...
# just executed
</code></pre>

<p>[2] In addition to the setting [1], set that some commands are not allowed.</p>
<pre><code class="bash">[root@dlp ~]# visudo
# near line 49: add aliase for the kind of shutdown commands
Cmnd_Alias SHUTDOWN = /sbin/halt, /sbin/shutdown, \
/sbin/poweroff, /sbin/reboot, /sbin/init
# add ( commands in aliase 'SHUTDOWN' are not allowed )
cent     ALL=(ALL)     ALL, !SHUTDOWN
# make sure with the user 'cent'
[cent@dlp ~]$ sudo /sbin/shutdown -r now
Sorry, user cent is not allowed to execute '/sbin/shutdown -r now' as root on dlp.srv.world.   # denied normally
</code></pre>

<p>[3] Transfer some commands with root privilege to users in a group.</p>
<pre><code class="bash">[root@dlp ~]# visudo
# near line 51: add aliase for the kind of user management comamnds
Cmnd_Alias USERMGR = /usr/sbin/useradd, /usr/sbin/userdel, /usr/sbin/usermod, \
/usr/bin/passwd
# add at the last line
%usermgr ALL=(ALL) USERMGR
[root@dlp ~]# groupadd usermgr
[root@dlp ~]# usermod -G usermgr cent
# make sure with the user 'cent'
[cent@dlp ~]$ sudo /usr/sbin/useradd testuser
[cent@dlp ~]$     # done normally
[cent@dlp ~]$ sudo /usr/bin/passwd testuser
Changing password for user testuser.
New UNIX password:
Retype new UNIX password:
passwd: all authentication tokens updated successfully.
</code></pre>

<p>[4] Transfer a command with root privilege to a user.</p>
<pre><code class="bash">[root@dlp ~]# visudo
# add at the last line
cent    ALL=(ALL) /usr/sbin/visudo
fedora  ALL=(ALL) /usr/sbin/useradd, /usr/sbin/userdel, /usr/sbin/usermod, /usr/bin/passwd
ubuntu  ALL=(ALL) /bin/vi
# make sure with the user 'cent'
[cent@dlp ~]$ sudo /usr/sbin/visudo
# possible to open and edit
## Sudoers allows particular users to run various commands as
## the root user, without needing the root password.
##
# make sure with the user 'fedora'
[fedora@dlp ~]$ sudo /usr/sbin/userdel -r testuser
[fedora@dlp ~]$     # done normally
# make sure with the user 'ubuntu'
[ubuntu@dlp ~]$ sudo /bin/vi /boot/grub/grub.conf
# possible to open and edit
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE: You have a /boot partition. This means that
</code></pre>

<p>[5] The logs for sudo are kept in '/var/log/secure', but there are many kind of logs in it. So if you'd like to keep only sudo's log in a file, Set like follows.</p>
<pre><code class="bash">[root@dlp ~]# visudo
# add at the last line
Defaults syslog=local1
[root@dlp ~]# vi /etc/rsyslog.conf
# line 54: add
*.info;mail.none;authpriv.none;cron.none;local1.none   /var/log/messages
# add the line, too
local1.*                                                /var/log/sudo.log

[root@dlp ~]# systemctl restart rsyslog
</code></pre>

<hr />
<h2 id="11-crons-setting">(11) Cron's Setting</h2>
<p><em>Initial Settings : Cron's Setting</em></p>
<p>[1] The regular jobs are controled by anacron by default. But anacron runs randomly in a day(at 3-22), so if you'd like to use cron and control jobs at a time, change like follows.</p>
<p>But Consider to change it if your server is virtualization environment. In virtual server, some virtual machines are running and if they executes regular jobs at a time all, the server will have many loading at a time. So it's necessary to change time on each machine by hand, or Keep anacron setting.</p>
<pre><code class="bash">[root@dlp ~]# yum -y install cronie-noanacron
* there is time settings of Cron in /etc/cron.d/dailyjobs
</code></pre>

<p>[2] Remove anacron settings's package, if you installed cron's setting.</p>
<pre><code class="bash">[root@dlp ~]# yum -y remove cronie-anacron
</code></pre>

<hr />
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../../centos8/ntp_ssh-server/" title="NTP / SSH Server" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                NTP / SSH Server
              </div>
            </div>
          </a>
        
        
          <a href="../ntp_ssh-server/" title="NTP / SSH Server" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                NTP / SSH Server
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" /></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; azula4ever
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.36cbf620.min.js"></script>
      <script src="../../assets/javascripts/bundle.00c583dd.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.7f7c8775.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>